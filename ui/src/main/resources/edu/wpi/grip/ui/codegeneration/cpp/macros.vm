#macro(cType $type)#if($type.equals("Double") || $type.equals("Number"))
double#elseif($type.equals("Object"))
void#elseif ($type.equals("ContoursReport"))
std::vector<std::vector<cv::Point> >#elseif ($type.equals("BlobsReport"))
std::vector<cv::KeyPoint>#elseif ($type.equals("LinesReport"))
std::vector<Line>#elseif ($type.equals("RectsReport"))
std::vector<cv::Rect>#elseif($type == "Integer" )
int#elseif($type == "Boolean" || "boolean")
bool#elseif($type.equals("String"))
std::string#elseif($type.contains("Enum"))
int#elseif($type.equalsIgnoreCase("BlurType"))
BlurType#elseif($type.contains("Type"))
int#elseif($type.equalsIgnoreCase("MaskSize"))
std::string#elseif($type.equalsIgnoreCase("Interpolation"))
int#elseif($type.equalsIgnoreCase("FlipCode"))
FlipCode#elseif($type.equalsIgnoreCase("List"))
List#else
cv::$type#end#end

#macro(funPassType $baseType)
#set($type = "#cType($baseType)")
#if($type.equals("double") || $type.equals("int") || $type.equals("bool") || $type.equals("std::string"))
#else
&#end#end

#macro(setter $source)
set$source.value()(#cType($source.type()) #funPassType($source.type())$source.value())#end

#macro(param $inp $name)
#set($type = "#cType($inp.type())")
#if($type.equalsIgnoreCase("list"))
double ${name}[]#else
$type #funPassType($inp.type())$name#end#end

#macro(func $step $names)
#set($name = $tMeth.name($step.name()))
#set($count = 0)
#if($name.toLowerCase().contains("switch"))
pipeline$name(bool sw, T &onTrue, T &onFalse, T &output)#elseif($name.toLowerCase().contains("valve"))
pipeline$name(bool sw, T &input, T &output)#else
$name(#foreach($inp in $step.getInputs())#param($inp $names[$count])#set($count = $count + 1), #end#if($name.equalsIgnoreCase("ThresholdMoving"))cv::Mat &lastImage, #end#foreach($out in $step.getOutputs())#cType($out.type()) &$names[$count]#set($count = $count + 1)#if($velocityCount <$step.getOutputs().size()), #end#end)#end#end

#macro(headerFunc $step)
#set($numVars = $step.getInputs().size() + $step.getOutputs().size())
#set($varArray = [])
#foreach($i in [0 .. $numVars])
#set($randomBoolWeDoNotCareAbout = $varArray.add(""))
#end
#func($step $varArray)
#end

#macro (inputType $input)
#if ($input.value().toLowerCase().contains("source") || $input.value().toLowerCase().contains("output"))
#cType($input.type())##
#elseif ($input.type().contains("BorderTypesEnumCoreEnum"))
int##
#elseif ($input.type().contains("CoreEnum"))
int##
#elseif ($input.type().equals("ColorConversionCodesEnum"))
int##
#elseif ($input.type().equals("ColormapTypesEnum"))
int##
#elseif ($input.type().equals("InterpolationFlagsEnum"))
int##
#elseif ($input.type().equals("CVThresholdTypesEnum"))
int##
#elseif ($input.type().contains("Enum"))
int##
#elseif ($input.type().equals("MaskSize") )
std::string##
#elseif ($input.type().equals("FlipCode") || $input.type().equals("BlurType") )
$input.type()##
#elseif ($input.type().contains("Type") || $input.type().equals("Interpolation"))
int##
#elseif ($input.type().equals("String"))
std::string##
#elseif ($input.type().equals("List"))
double##
#else
#cType($input.type())##
#end#end

#macro (inputVarName $input)${tMeth.name($input.name())}#end

#macro (inputValue $input)
#if ($input.value().toLowerCase().contains("source") || $input.value().toLowerCase().contains("output"))
$tMeth.name($input.value())##
#elseif ($input.type().contains("BorderTypesEnumCoreEnum"))
cv::$input.value()##
#elseif ($input.type().contains("CoreEnum"))
$input.value()##
#elseif ($input.type().equals("ColorConversionCodesEnum"))
cv::$input.value()##
#elseif ($input.type().equals("ColormapTypesEnum"))
cv::$input.value()##
#elseif ($input.type().equals("InterpolationFlagsEnum"))
cv::$input.value()##
#elseif ($input.type().equals("CVThresholdTypesEnum"))
cv::$input.value()##
#elseif ($input.type().contains("Enum"))
$input.value()##
#elseif ($input.type().equals("MaskSize") )
"$input.value()"##
#elseif ($input.type().equals("FlipCode") || $input.type().equals("BlurType") )
$input.type()::#cvVal($input.value())##
#elseif ($input.type().contains("Type") || $input.type().equals("Interpolation"))
#cvVal($input.value())##
#elseif ($input.type().equals("String"))
"$input.value()"##
#elseif ($input.type().equals("List"))
#set($inputEndValue = $input.value().length() - 1)
{$input.value().substring(1,$inputEndValue)}##
#elseif ($input.value().equals("null"))
nullptr##
#else
$input.value()##
#end#end

#macro (newInputInit $input)
#if ($input.type().contains("Enum"))
#inputVarName($input) = #inputValue($input); //ENUM $input.type()
#elseif ($input.type().equals("List"))
#set($commaPos = $input.value().indexOf(','))
#set($v2Pos = $input.value().indexOf(',') + 1)
#set($inputEndValue = $input.value().length() - 1)
#inputVarName($input)[0] = $input.value().substring(1,$commaPos);
#inputVarName($input)[1] = $input.value().substring($v2Pos, $inputEndValue);
#elseif ($input.type().equals("Point") || $input.type().equals("Size") || $input.type().equalsIgnoreCase("Scalar"))
#inputVarName($input)#inputValue($input);
#elseif ($input.value().equals("null"))
#elseif ($input.type().equals("Mat"))
#else
#inputVarName($input) = #inputValue($input);
#end#end

#macro (newInputDecl $input)
#if ($input.type().equals("List"))
#inputType($input) #inputVarName($input)[2];
#else
#inputType($input) #inputVarName($input);
#end#end

#macro (newInput $input)
#if ($input.type().contains("Enum"))
    #inputType($input) #inputVarName($input) = #inputValue($input); //ENUM $input.type()
#elseif ($input.type().equals("List"))
	#inputType($input) #inputVarName($input)[] = #inputValue($input);
#elseif ($input.type().equals("Point") || $input.type().equals("Size") || $input.type().equalsIgnoreCase("Scalar"))
	#inputType($input) #inputVarName($input)#inputValue($input);
#elseif ($input.value().equals("null"))
	#inputType($input) #inputVarName($input);
#elseif ($input.type().equals("Mat"))
	#inputType($input) #inputVarName($input)#inputValue($input);
#else
	#inputType($input) #inputVarName($input) = #inputValue($input);
#end#end

#macro (cvVal $value)#if($value.equals("INF"))
cv::NORM_INF#elseif($value.equals("L1"))
cv::NORM_L1#elseif($value.equals("L2"))
cv::NORM_L2#elseif($value.equals("MINMAX"))
cv::NORM_MINMAX#elseif($value.equals("None"))
cv::INTER_NEAREST#elseif($value.equals("Linear"))
cv::INTER_LINEAR#elseif($value.equals("Cubic"))
cv::INTER_CUBIC#elseif($value.equals("Lanczos"))
cv::INTER_LANCZOS4#elseif($value.equals("Area"))
cv::INTER_AREA#elseif($value.equals("Box Blur"))
BOX#elseif($value.equals("Gaussian Blur"))
GAUSSIAN#elseif($value.equals("Median Filter"))
MEDIAN#elseif($value.equals("Bilateral Filter"))
BILATERAL#else
$value#end#end

#macro(enumType $uniStep)
#set($name = $tMeth.name($uniStep.name()))
#if($uniStep.name().equalsIgnoreCase("Blur"))
/**
* A representation of the different types of blurs that can be used.
*
*/
enum BlurType {
	BOX, GAUSSIAN, MEDIAN, BILATERAL
};
#elseif($name.contains("Flip"))
/**
 * Code used for CV_flip. 
 * Per OpenCV spec 0 -> flip on X axis.
 * >0 -> flip on Y axis.
 * <0 -> flip on both axes.
 */
enum FlipCode {
	X_AXIS = 0,
	Y_AXIS = 1,
	BOTH_AXES = -1,
};
#end
#end
